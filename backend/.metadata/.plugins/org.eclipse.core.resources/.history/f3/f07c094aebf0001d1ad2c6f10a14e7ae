package com.cg.upload.serviceimpl;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.web.multipart.MultipartFile;

import com.cg.upload.dto.UploadInfo;
import com.cg.upload.service.UploadService;
import com.cg.upload.util.UploadUtil;

@Service
public class UploadServiceImpl implements UploadService {

	@Autowired
	private UploadUtil uploadUtil;

	@Override
	public UploadInfo upload(String ownerId, MultipartFile[] files) {
		UploadInfo info = new UploadInfo();
		info.setOwnerId(ownerId);

		for (MultipartFile file : files) {
			info.getUrls().add(uploadUtil.prepareImage(file, ownerId));
		}

		//save in db
		return info;
	}

	@Override
	public Object remove(String fileName) {
		//delete from db
		return uploadUtil.deleteImage(fileName);
	}

	@Override
	public Object removeAllByOwner(String ownerId) {
		//delete from db
		return uploadUtil.deleteDirectory(ownerId);
	}

	@Override
	public Object get(String ownerId) {
		return null;
	}

	@Override
	public Object getFile(String fileName) {
		return null;
	}

}
